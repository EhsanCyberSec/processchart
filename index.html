<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد پیگیری جلسات</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Vazirmatn', sans-serif;background:#f5f5f5;line-height:1.6;}
        html{scroll-behavior:smooth;}
        .container{max-width:1200px;margin:0 auto;padding:20px;}
        header{text-align:center;margin-bottom:30px;}
        .charts-container{margin-top:40px;display:grid;grid-template-columns:1fr;gap:40px;}
        .chart-box{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
        #departmentsSection{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:20px;margin-top:40px;}
        .department-card{background:#fff;border-radius:12px;padding:15px;text-align:center;position:relative;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
        .sidebar{position:fixed;top:50%;transform:translateY(-50%);left:20px;background:#fff;padding:10px 15px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);z-index:1000;}
        .sidebar a{display:block;margin-bottom:10px;color:#333;text-decoration:none;font-weight:600;font-size:14px;}
        .sidebar a:hover{color:#4285F4;}
        #backToTop{position:fixed;bottom:20px;left:20px;background:#4285F4;color:#fff;border:none;border-radius:50%;width:40px;height:40px;display:none;cursor:pointer;}
        #backToTop.show{display:block;}
    </style>
</head>
<body>
<a id="top"></a>
<nav class="sidebar">
    <a href="#progressSection">پیشرفت</a>
    <a href="#departmentsSection">معاونت‌ها</a>
    <a href="#barChartSection">نمودار میله‌ای</a>
    <a href="#monthlyChartSection">نمودار ماهانه</a>
</nav>
<button id="backToTop" title="بازگشت به بالا">▲</button>
<div class="container">
    <header id="header">
        <h1>شناسایی ذی نفعان و تعیین نیازمندی‌ها</h1>
        <p>پیگیری وضعیت برگزاری جلسات در معاونت‌های بانک</p>
    </header>

    <section id="progressSection" class="chart-box" style="text-align:center;">
        <canvas id="progressChart" width="250" height="250"></canvas>
        <p style="margin-top:10px;">۱۲۲ جلسه از مجموع ۱۸۸ جلسه برگزار شده است.</p>
    </section>

    <section id="departmentsSection">
        <div class="department-card">معاونت نظارت</div>
        <div class="department-card">معاونت حقوقی و وصول مطالبات</div>
        <div class="department-card">معاونت سرمایه های انسانی</div>
        <div class="department-card">معاونت طرح و توسعه</div>
        <div class="department-card">معاونت مشتریان شرکتی و تجاری</div>
        <div class="department-card">معاونت مشتریان بانکداری شخصی</div>
        <div class="department-card">معاونت مهندسی و پشتیبانی</div>
        <div class="department-card">معاونت سرمایه گذاری و امور شرکت‌ها</div>
        <div class="department-card">معاونت اعتباری</div>
        <div class="department-card">معاونت مالی</div>
        <div class="department-card">اداره امنیت اطلاعات</div>
        <div class="department-card">اداره حسابرسی داخلی</div>
        <div class="department-card">مدیریت مبارزه با پولشویی و تامین مالی تروریسم</div>
        <div class="department-card">مدیریت امور روابط عمومی</div>
        <div class="department-card">اداره مدیریت ریسک</div>
        <div class="department-card">اداره تطبیق</div>
        <div class="department-card">معاونت بین‌الملل</div>
        <div class="department-card">معاونت استان‌ها و شبکه فروش</div>
        <div class="department-card">معاونت فناوری اطلاعات</div>
    </section>

    <div class="charts-container">
        <section id="barChartSection" class="chart-box">
            <h3 style="text-align:center;margin-bottom:20px;">نمودار آماری تعداد برگزاری جلسات</h3>
            <canvas id="barChart"></canvas>
        </section>
        <section id="monthlyChartSection" class="chart-box">
            <h3 style="text-align:center;margin-bottom:20px;">روند ماهانه برگزاری جلسات</h3>
            <canvas id="monthlyChart"></canvas>
        </section>
    </div>
</div>

<script>
// numbers in Persian
function toPersianNumber(num){const digits=['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];return num.toString().replace(/\d/g,d=>digits[d]);}

// donut chart
const progressCtx=document.getElementById('progressChart').getContext('2d');
new Chart(progressCtx,{type:'doughnut',data:{labels:['تکمیل شده','باقی مانده'],datasets:[{data:[122,66],backgroundColor:['#34A853','#4285F4'],hoverOffset:4}]},options:{cutout:'70%',plugins:{tooltip:{callbacks:{label:ctx=>`${ctx.label}: ${toPersianNumber(ctx.parsed)}`}},legend:{display:false}},}});

// bar chart
const barCtx=document.getElementById('barChart').getContext('2d');
new Chart(barCtx,{type:'bar',data:{labels:['اعتباری','حقوقی','سرمایه انسانی','سرمایه‌گذاری','طرح و توسعه','بانکداری شخصی','شرکتی و تجاری','بین‌الملل','مالی','مهندسی','نظارت','امنیت اطلاعات','حسابرسی','ریسک','پولشویی','تطبیق'],datasets:[{data:[8,13,14,4,12,8,8,3,16,12,9,8,2,3,1,1],backgroundColor:'#4285F4'}]},options:{plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>`تعداد جلسات: ${toPersianNumber(ctx.parsed.y)}`}}},scales:{y:{beginAtZero:true,ticks:{callback:value=>toPersianNumber(value)}},x:{ticks:{font:{size:12}}}}});

// line chart
const lineCtx=document.getElementById('monthlyChart').getContext('2d');
new Chart(lineCtx,{type:'line',data:{labels:['اسفند ۱۴۰۳','فروردین ۱۴۰۴','اردیبهشت ۱۴۰۴','خرداد ۱۴۰۴'],datasets:[{data:[21,20,51,28],borderColor:'#34A853',fill:false,tension:0.4}]},options:{plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>`تعداد جلسات: ${toPersianNumber(ctx.parsed.y)}`}}},scales:{y:{beginAtZero:true,ticks:{callback:value=>toPersianNumber(value)}},x:{ticks:{font:{size:12}}}}});

// back to top button
const backBtn=document.getElementById('backToTop');
window.addEventListener('scroll',()=>{if(window.scrollY>300){backBtn.classList.add('show');}else{backBtn.classList.remove('show');}});
backBtn.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});});
</script>
</body>
</html>
